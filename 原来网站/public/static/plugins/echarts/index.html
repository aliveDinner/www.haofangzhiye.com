<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript" src="../jquery/jquery-1.11.2.min.js"></script>
    <script type="text/javascript" src="echarts.js"></script>
    <script type="text/javascript" src="vintage.js"></script>
</head>
<body>

<div style="display: flex;">
    <div id="myChartManager" style="width:100%;height:600px;margin: auto"></div>
    <script type="text/javascript">
        _width = document.documentElement.clientWidth;//获取页面可见宽度
        _height = document.documentElement.clientHeight;//获取页面可见高度
        var uploadedDataURL = "./china.json";
        function randomData() {
            return Math.round(Math.random() * 1000);
        }
        var myChartManager = echarts.init(document.getElementById('myChartManager'));
        myChartManager.showLoading();
        $.get(uploadedDataURL, function (d) {
            echarts.registerMap('china', d);
            var _managerOption = {
                title: {
                    text: 'APP 用户',
                    subtext: '纯属虚构',
                    left: 'center'
                },
                tooltip: {
                    trigger: 'item',
                    formatter: function (params) {
                        var _html = params.name + '<br/>';
                        var _series = _managerOption.series;
                        for (var i = 0; i < _series.length; i++) {
                            for (var j = 0; j < _series[i].data.length; j++) {
                                if (_series[i].data[j].name == params.name) {
                                    _html += _series[i].name + ' : ' + _series[i].data[j].value + '</br>';
                                }
                            }
                        }
                        return _html;
                    }
                },
                legend: {
                    orient: 'vertical',
                    left: 'left',
                    data: ['APP 1', 'APP 2', 'APP 3']
                },
                visualMap: {
                    min: 0,
                    max: 2500,
                    left: 'left',
                    top: 'bottom',
                    text: ['高', '低'],           // 文本，默认为数值文本
                    calculable: true,
                    color: ['red', '#1cd388', '#f4f4f4']
                },
                toolbox: {
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {
                            show: true,
                            type: ['pie', 'funnel']
                        },
                        restore: {show: true},
                        saveAsImage: {show: true}
                    }
                },
                series: [
                    {
                        name: 'APP 1',
                        type: 'map',
                        mapType: 'china',
                        roam: true,
                        label: {
                            normal: {
                                show: true
                            },
                            emphasis: {
                                show: true
                            }
                        },
                        data: [
                            {name: '北京', value: randomData()},
                            {name: '天津', value: randomData()},
                            {name: '上海', value: randomData()},
                            {name: '重庆', value: randomData()},
                            {name: '河北', value: randomData()},
                            {name: '河南', value: randomData()},
                            {name: '云南', value: randomData()},
                            {name: '辽宁', value: randomData()},
                            {name: '黑龙江', value: randomData()},
                            {name: '湖南', value: randomData()},
                            {name: '安徽', value: randomData()},
                            {name: '山东', value: randomData()},
                            {name: '新疆', value: randomData()},
                            {name: '江苏', value: randomData()},
                            {name: '浙江', value: randomData()},
                            {name: '江西', value: randomData()},
                            {name: '湖北', value: randomData()},
                            {name: '广西', value: randomData()},
                            {name: '甘肃', value: randomData()},
                            {name: '山西', value: randomData()},
                            {name: '内蒙古', value: randomData()},
                            {name: '陕西', value: randomData()},
                            {name: '吉林', value: randomData()},
                            {name: '福建', value: randomData()},
                            {name: '贵州', value: randomData()},
                            {name: '广东', value: randomData()},
                            {name: '青海', value: randomData()},
                            {name: '西藏', value: randomData()},
                            {name: '四川', value: randomData()},
                            {name: '宁夏', value: randomData()},
                            {name: '海南', value: randomData()},
                            {name: '台湾', value: randomData()},
                            {name: '香港', value: randomData()},
                            {name: '澳门', value: randomData()}
                        ],
                    },
                    {
                        name: 'APP 2',
                        type: 'map',
                        mapType: 'china',
                        label: {
                            normal: {
                                show: true
                            },
                            emphasis: {
                                show: true
                            }
                        },
                        data: [
                            {name: '北京', value: randomData()},
                            {name: '天津', value: randomData()},
                            {name: '上海', value: randomData()},
                            {name: '重庆', value: randomData()},
                            {name: '河北', value: randomData()},
                            {name: '安徽', value: randomData()},
                            {name: '新疆', value: randomData()},
                            {name: '浙江', value: randomData()},
                            {name: '江西', value: randomData()},
                            {name: '山西', value: randomData()},
                            {name: '内蒙古', value: randomData()},
                            {name: '吉林', value: randomData()},
                            {name: '福建', value: randomData()},
                            {name: '广东', value: randomData()},
                            {name: '西藏', value: randomData()},
                            {name: '四川', value: randomData()},
                            {name: '宁夏', value: randomData()},
                            {name: '香港', value: randomData()},
                            {name: '澳门', value: randomData()}
                        ]
                    },
                    {
                        name: 'APP 3',
                        type: 'map',
                        mapType: 'china',
                        label: {
                            normal: {
                                show: true
                            },
                            emphasis: {
                                show: true
                            }
                        },
                        data: [
                            {name: '北京', value: randomData()},
                            {name: '天津', value: randomData()},
                            {name: '上海', value: randomData()},
                            {name: '广东', value: randomData()},
                            {name: '台湾', value: randomData()},
                            {name: '香港', value: randomData()},
                            {name: '澳门', value: randomData()}
                        ]
                    }
                ],
            };
            myChartManager.hideLoading();
            if (_managerOption && typeof _managerOption === "object") {
                var startTime = +new Date();
                myChartManager.setOption(_managerOption, true);
                var endTime = +new Date();
                var updateTime = endTime - startTime;
                console.log("Time used:", updateTime);
                myChartManager.on('mouseover', function (params) {
                    // 控制台打印数据的名称
//                console.log(params);
                    var _html = params.name + '<br/>';
                    var _series = _managerOption.series;
                    for (var i = 0; i < _series.length; i++) {
                        for (var j = 0; j < _series[i].data.length; j++) {
                            if (_series[i].data[j].name == params.name) {
                                _html += _series[i].name + ' : ' + _series[i].data[j].value + '</br>';
                            }
                        }
                    }

//                console.log(_html);
                    // 显示 tooltip
                });
//            // 图例开关的行为只会触发 legendselectchanged 事件
//            myChart.on('legendselectchanged', function (params) {
//                // 获取点击图例的选中状态
//                var isSelected = params.selected[params.name];
//                // 在控制台中打印
//                console.log((isSelected ? '选中了' : '取消选中了') + '图例' + params.name);
//                // 打印所有图例的状态
//                console.log(params.selected);
//            });
            }
        });

    </script>
</div>

<div style="display: flex;">
    <div id="myChartUser" style="width:100%;height:600px;margin: auto"></div>
    <script type="text/javascript">
        var myChartUser = echarts.init(document.getElementById('myChartUser'));
        var _userOption = {
            baseOption: {
                title: {
                    text: '比较图',
                    subtext: '纯属虚构',
                    x: 'center'
                },
                tooltip: {
                    trigger: 'item',
                    formatter: function (params) {
                        var res = params.name + '<br/>';
                        var _series = _userOption.baseOption.series;
                        for (var i = 0; i < _series.length; i++) {
                            for (var j = 0; j < _series[i].data.length; j++) {
                                if (_series[i].data[j].name == params.name) {
                                    res += _series[i].name + ' : ' + _series[i].data[j].value + '</br>';
                                }
                            }
                        }
                        return res;
                    }
                },
                legend: {
                    data: ['rose1', 'rose2', 'rose3', 'rose4', 'rose5', 'rose6', 'rose7', 'rose8']
                },
                toolbox: {
                    orient :'vertical',
                    bottom: '50%',
                    show: true,
                    feature: {
                        mark: {show: true},
                        dataView: {show: true, readOnly: false},
                        magicType: {
                            show: true,
                            type: ['pie', 'funnel']
                        },
                        restore: {show: true},
                        saveAsImage: {show: true}
                    }
                },
                calculable: true,
                series: [
                    {
                        name: '半径模式',
                        type: 'pie',
                        roseType: 'radius',
                        label: {
                            normal: {
                                show: false
                            },
                            emphasis: {
                                show: true
                            }
                        },
                        lableLine: {
                            normal: {
                                show: false
                            },
                            emphasis: {
                                show: true
                            }
                        },
                        data: [
                            {value: 10, name: 'rose1'},
                            {value: 5, name: 'rose2'},
                            {value: 15, name: 'rose3'},
                            {value: 25, name: 'rose4'},
                            {value: 20, name: 'rose5'},
                            {value: 35, name: 'rose6'},
                            {value: 30, name: 'rose7'},
                            {value: 40, name: 'rose8'}
                        ]
                    },
                    {
                        name: '面积模式',
                        type: 'pie',
                        roseType: 'area',
                        data: [
                            {value: 10, name: 'rose1'},
                            {value: 5, name: 'rose2'},
                            {value: 15, name: 'rose3'},
                            {value: 25, name: 'rose4'},
                            {value: 20, name: 'rose5'},
                            {value: 35, name: 'rose6'},
                            {value: 30, name: 'rose7'},
                            {value: 40, name: 'rose8'}
                        ]
                    }
                ]
            },
            media: [
                {
                    option: {
                        legend: {
                            right: 'center',
                            bottom: 0,
                            orient: 'horizontal'
                        },
                        series: [
                            {
                                radius: [20, '50%'],
                                center: ['25%', '50%']
                            },
                            {
                                radius: [30, '50%'],
                                center: ['75%', '50%']
                            }
                        ]
                    }
                },
                {
                    query: {
                        minAspectRatio: 1
                    },
                    option: {
                        legend: {
                            right: 'center',
                            bottom: 0,
                            orient: 'horizontal'
                        },
                        series: [
                            {
                                radius: [20, '50%'],
                                center: ['25%', '50%']
                            },
                            {
                                radius: [30, '50%'],
                                center: ['75%', '50%']
                            }
                        ]
                    }
                },
                {
                    query: {
                        maxAspectRatio: 1
                    },
                    option: {
                        legend: {
                            right: 'center',
                            bottom: 0,
                            orient: 'horizontal'
                        },
                        series: [
                            {
                                radius: [20, '50%'],
                                center: ['50%', '30%']
                            },
                            {
                                radius: [30, '50%'],
                                center: ['50%', '70%']
                            }
                        ]
                    }
                },
                {
                    query: {
                        maxWidth: 500
                    },
                    option: {
                        legend: {
                            right: 10,
                            top: '15%',
                            orient: 'vertical'
                        },
                        series: [
                            {
                                radius: [20, '50%'],
                                center: ['50%', '30%']
                            },
                            {
                                radius: [30, '50%'],
                                center: ['50%', '75%']
                            }
                        ]
                    }
                }
            ]
        };
        myChartUser.setOption(_userOption);

        var app = {currentIndex: -1};

        //        setInterval(function () {
        //            var dataLen = _userOption.series[0].data.length;
        //            // 取消之前高亮的图形
        //            myChartUser.dispatchAction({
        //                type: 'downplay',
        //                seriesIndex: 0,
        //                dataIndex: app.currentIndex
        //            });
        //            app.currentIndex = (app.currentIndex + 1) % dataLen;
        //            // 高亮当前图形
        //            myChartUser.dispatchAction({
        //                type: 'highlight',
        //                seriesIndex: 0,
        //                dataIndex: app.currentIndex
        //            });
        //            // 显示 tooltip
        //            myChartUser.dispatchAction({
        //                type: 'showTip',
        //                seriesIndex: 0,
        //                dataIndex: app.currentIndex
        //            });
        //
        //            if (app.currentIndex > _userOption.baseOption.legend.data.length){
        //                app.currentIndex = -1;
        //            }
        //        }, 1000);

    </script>
</div>
</body>
</html>